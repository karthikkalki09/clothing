<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=0.8" />
  <title>TEDPOLE - Premium Clothing & Accessories</title>
  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet" />
  <!-- QR Code Library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <!-- html2canvas Library for Download Functionality -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <style>
    /* Base theme */
    body {
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #f6f9fc, #e9f0f8), url('https://www.toptal.com/designers/subtlepatterns/uploads/double-bubble-outline.png');
      background-size: cover;
      margin-bottom: 70px;
    }
    header {
      background: linear-gradient(90deg, #1e3c72, #2a5298);
      color: #fff;
      position: sticky;
      top: 0;
      z-index: 1000;
    }
    header h1, header .profile-name { color: #fff; }
    .btn-primary { background-color: #2a5298; border-color: #2a5298; }
    .btn-danger { background-color: #d9534f; border-color: #d43f3a; }
    .btn-info { background-color: #5bc0de; border-color: #46b8da; }
    .bg-light { background-color: #f8f9fa !important; }

    /* Fade-in animation */
    .fade-in { animation: fadeIn 0.5s ease-in-out; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

    /* General Styling */
    .hero { padding: 20px 0; }
    .hero h2 { font-size: 1.75rem; margin-bottom: 0.5rem; }
    .product-highlight img, .category-item img { border-radius: 5px; }
    header h1 { font-size: 1.125rem; font-weight: 600; }
    header .profile-name { font-size: 1rem; margin-left: 10px; }

    /* Header Navigation */
    nav a, nav button { font-size: 0.9rem; padding: 5px 1px; color: #fff; text-decoration: none; background: none; border: none; }
    nav a:hover, nav button:hover { color: #fff; }
    nav .btn i { font-size: 1.75rem; transition: color 0.3s ease; }
    nav .btn i:hover { color: #ffdd57; }
    .header-nav { display: flex; gap: 0.5rem; align-items: center; }
    #notificationButton { font-size: 1.75rem; }

    /* Category Section */
    .category-item { text-align: center; cursor: pointer; }
    .category-item img { transition: transform 0.3s ease-in-out; }
    .category-item img:hover { transform: scale(1.05); }
    .category-item h4 { margin-top: 10px; font-size: 1.2rem; }

    /* Section Visibility */
    .section { display: none; }
    .active-section { display: block; }

    /* Offcanvas Menu */
    .offcanvas { background: #f8f9fa; border-right: 4px solid #2a5298; }
    .offcanvas-header { background: #2a5298; color: #fff; }
    .offcanvas-header .btn-close { filter: invert(1); }
    .custom-menu-item { padding: 10px 15px; font-size: 1rem; border-bottom: 1px solid #ddd; transition: background 0.3s; }
    .custom-menu-item:hover { background: #e9f0fa; }
    #menuAccountDetails { padding: 15px; background: #fff; border-bottom: 2px solid #2a5298; border-radius: 5px; text-align: center; margin-bottom: 10px; }

    /* Popup Modal */
    .popup-modal-content { border: 3px solid #2a5298; border-radius: 12px; background: linear-gradient(135deg, #fff, #f0f8ff); box-shadow: 0 0 15px rgba(0, 0, 0, 0.15); }
    .popup-modal-header, .popup-modal-footer { border: none; }
    .popup-modal-body { text-align: center; font-size: 1.3rem; font-weight: 600; padding: 20px; }

    /* Toast Container */
    #toastContainer { position: fixed; top: 1rem; right: 1rem; z-index: 1100; }

   
  /* Filter Section */
  #filterSection { margin-top: 20px; border-top: 2px solid #2a5298; padding-top: 20px; background-color: #e9f0fa; }
  .filter-tags { margin-top: 10px; }
  .filter-tags .badge { cursor: pointer; }

    /* Product Detail Styling */
    #productDetailPage .row { align-items: center; }
    .product-detail-img { max-height: 400px; object-fit: contain; }

    /* Footer Navigation */
    .footer-nav { position: fixed; bottom: 0; left: 0; right: 0; background: linear-gradient(90deg, #1e3c72, #2a5298); border-top: 1px solid #ddd; z-index: 1200; padding: 10px 0; }
    .footer-nav .nav-item { text-align: center; flex: 1; position: relative; }
    .footer-nav .nav-link { color: #fff; font-size: 1rem; transition: color 0.3s ease; position: relative; }
    .footer-nav .nav-link i { font-size: 1.75rem; color: #fff; transition: color 0.3s ease; }
    .footer-nav .nav-text { font-size: 0.75rem; color: #fff; }
    .footer-nav .nav-link:hover, .footer-nav .nav-link:hover i, .footer-nav .nav-link:hover .nav-text { color: #ffdd57; }
    .footer-nav .badge { position: absolute; top: -5px; right: -10px; background-color: #ffdd57; color: #000; font-size: 0.6rem; padding: 2px 5px; border-radius: 50%; }

    /* Wishlist Button Styling */
    .wishlist-btn { background: rgba(255, 255, 255, 0.8); border-radius: 50%; border: none; padding: 5px; }

    /* Dynamic Hover Effects */
    .btn:hover { transform: scale(1.05); transition: transform 0.3s; }
    .card:hover { box-shadow: 0 4px 8px rgba(0,0,0,0.1); transition: box-shadow 0.3s; }

    /* Updated Track Bar Styling */
    .track-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 20px 0;
    }
    .track-step {
      text-align: center;
      position: relative;
      flex: 1;
    }
    .track-step:not(:last-child):after {
      content: '';
      position: absolute;
      top: 15px;
      left: 50%;
      width: 100%;
      height: 2px;
      background-color: #ccc;
      z-index: -1;
    }
    .track-bar.received .track-step:not(:last-child):after {
      background-color: #28a745;
    }
    .track-bar.cancelled .track-step:not(:last-child):after {
      background-color: #dc3545;
    }
    .track-step span {
      display: block;
      width: 30px;
      height: 30px;
      line-height: 30px;
      border-radius: 50%;
      background-color: #ccc;
      color: #fff;
      margin: 0 auto 5px;
    }
    .track-step.active span {
      background-color: #28a745;
    }
    .track-step.cancelled span {
      background-color: #dc3545;
    }
    .color-thumbnail {
      display: inline-block;
      margin: 5px;
      border: 2px solid transparent;
      cursor: pointer;
    }
    .color-thumbnail.selected {
      border-color: #000;
    }
      /* Product Image Modal Styling */
      #productImageModal .modal-body {
        overflow: auto;
        max-height: 80vh;
        text-align: center;
      }
      #modalProductImage {
        transition: transform 0.3s ease;
      }
  </style>
</head>
<body>
  <!-- Toast Container -->
  <div id="toastContainer"></div>

  <!-- Popup Message Modal -->
  <div class="modal fade" id="popupMessageModal" tabindex="-1" aria-labelledby="popupMessageModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content popup-modal-content">
        <div class="modal-header popup-modal-header">
          <h5 class="modal-title" id="popupMessageModalLabel">Notification</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body popup-modal-body" id="popupMessageContent"></div>
        <div class="modal-footer popup-modal-footer" style="justify-content: center;">
          <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Okay</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Notifications Section -->
  <div id="notificationsSection" class="section">
    <header class="bg-light py-3 border-bottom">
      <div class="container d-flex justify-content-between align-items-center">
        <button class="btn" onclick="showSection('homeSection')"><i class="fas fa-arrow-left"></i> Home</button>
        <h1 class="h5 mb-0">Notifications</h1>
        <div></div>
      </div>
    </header>
    <div class="container my-4" id="notificationsContent"></div>
  </div>

  <!-- Offcanvas Menu -->
  <div class="offcanvas offcanvas-start" tabindex="-1" id="menuCanvas" aria-labelledby="menuCanvasLabel">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title" id="menuCanvasLabel">Menu</h5>
      <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div id="menuAccountDetails">
      <i class="fas fa-user-circle me-2"></i><span id="menuAccountText">Welcome Guest</span>
    </div>
    <ul class="list-unstyled">
      <li class="custom-menu-item" onclick="hideMenu(); showSection('ordersSection');"><i class="fas fa-list-alt me-2"></i> My Orders</li>
      <li id="sellerDashboardMenuItem" class="custom-menu-item" onclick="hideMenu(); showSection('sellerDashboard');" style="display: none;"><i class="fas fa-tachometer-alt me-2"></i> Seller Dashboard</li>
      <li id="ownerDashboardMenuItem" class="custom-menu-item" onclick="hideMenu(); showSection('ownerDashboard');" style="display: none;"><i class="fas fa-chart-line me-2"></i> Owner Dashboard</li>
      <li class="custom-menu-item" onclick="hideMenu(); showSection('aboutSection');"><i class="fas fa-info-circle me-2"></i> About Us</li>
      <li class="custom-menu-item" onclick="hideMenu(); showSection('contactSection');"><i class="fas fa-envelope me-2"></i> Contact Us</li>
      <li class="custom-menu-item" onclick="hideMenu(); showSection('couponsSection');"><i class="fas fa-tag me-2"></i> Coupons</li>
      <li class="custom-menu-item" onclick="hideMenu(); showSection('offerZoneSection');"><i class="fas fa-star me-2"></i> Offer Zone</li>
      <li class="custom-menu-item" onclick="hideMenu(); showSection('helpSection');"><i class="fas fa-question-circle me-2"></i> Help Line</li>
    </ul>
    <div id="menuSocialSection" class="mt-3 text-center">
      <a href="https://www.instagram.com/tedpole.in" target="_blank" class="mx-2"><i class="bi bi-instagram" style="color:#E1306C;"></i></a>
      <a href="https://x.com/TedpoleIn" target="_blank" class="mx-2"><i class="bi bi-twitter" style="color:#1DA1F2;"></i></a>
      <a href="https://www.linkedin.com/in/yourprofile" target="_blank" class="mx-2"><i class="bi bi-linkedin" style="color:#0077B5;"></i></a>
    </div>
  </div>

  <!-- Home Section -->
  <div id="homeSection" class="section active-section fade-in">
    <header class="py-3 border-bottom">
      <div class="container d-flex justify-content-between align-items-center">
        <button class="btn text-white" data-bs-toggle="offcanvas" data-bs-target="#menuCanvas" aria-controls="menuCanvas" aria-label="Toggle Menu"><i class="fas fa-bars fa-lg"></i></button>
        <h1 class="h5 mb-0 text-white">TEDPOLE <span id="headerProfile" class="profile-name"></span></h1>
        <nav class="header-nav">
          <button class="btn text-white" id="notificationButton" aria-label="Notifications"><i class="fas fa-bell fa-lg"></i></button>
          <button class="btn text-white" id="accountButton" aria-label="Account"><i class="fas fa-user fa-lg"></i></button>
        </nav>
      </div>
    </header>
    <section class="hero text-center">
      <div class="container">
        <h2 class="mt-4">Welcome to TEDPOLE</h2>
        <p>Your destination for premium clothes.</p>
        <button class="btn btn-dark mt-2" onclick="showSection('shopSection')" aria-label="Shop Now"><i class="fas fa-cart-check"></i> Shop Now</button>
      </div>
    </section>
    <section class="product-highlight py-5">
      <div class="container">
        <div id="productHighlightCarousel" class="carousel slide" data-bs-ride="carousel">
          <div class="carousel-indicators">
            <button type="button" data-bs-target="#productHighlightCarousel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
            <button type="button" data-bs-target="#productHighlightCarousel" data-bs-slide-to="1" aria-label="Slide 2"></button>
            <button type="button" data-bs-target="#productHighlightCarousel" data-bs-slide-to="2" aria-label="Slide 3"></button>
          </div>
          <div class="carousel-inner">
            <div class="carousel-item active">
              <img src="https://i.pinimg.com/474x/d0/fd/28/d0fd28fc614775339300cf6f2ab043d2.jpg" class="d-block w-100" alt="Product Highlight 1">
              <div class="carousel-caption d-none d-md-block">
                <h5>Luxury in Every Stitch</h5>
                <p>Clothing is a form of self-expression.</p>
              </div>
            </div>
            <div class="carousel-item">
              <img src="https://i.pinimg.com/474x/1e/d0/ed/1ed0ede5c364f2c8959976120f65271f.jpg" class="d-block w-100" alt="Product Highlight 2">
              <div class="carousel-caption d-none d-md-block">
                <h5>Trendy Men's Wear</h5>
                <p>Explore our latest collection.</p>
              </div>
            </div>
            <div class="carousel-item">
              <img src="https://i.pinimg.com/474x/f4/96/20/f496209cab01d85a80a84b785068c007.jpg" class="d-block w-100" alt="Product Highlight 3">
              <div class="carousel-caption d-none d-md-block">
                <h5>Stylish Accessories</h5>
                <p>Complete your look.</p>
              </div>
            </div>
          </div>
          <button class="carousel-control-prev" type="button" data-bs-target="#productHighlightCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
          </button>
          <button class="carousel-control-next" type="button" data-bs-target="#productHighlightCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
          </button>
        </div>
      </div>
    </section>
    <section class="categories py-5 bg-light">
      <div class="container text-center">
        <h2><i class="fas fa-columns-gap"></i> Shop by Categories</h2>
        <div class="row mt-4">
          <div class="col-md-6">
            <div class="category-item" onclick="showSection('menswearSection')">
              <img src="https://i.pinimg.com/474x/1e/d0/ed/1ed0ede5c364f2c8959976120f65271f.jpg" class="img-fluid" alt="Men's Wear" />
              <h4 class="mt-3"><i class="fas fa-people-group"></i> MEN'S WEAR</h4>
            </div>
          </div>
          <div class="col-md-6">
            <div class="category-item" onclick="showSection('accessoriesSection')">
              <img src="https://i.pinimg.com/474x/f4/96/20/f496209cab01d85a80a84b785068c007.jpg" class="img-fluid" alt="Accessories" />
              <h4 class="mt-3"><i class="fas fa-watch"></i> ACCESSORIES</h4>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- About Us Section -->
  <div id="aboutSection" class="section fade-in">
    <header class="py-3 border-bottom bg-light">
      <div class="container d-flex justify-content-between align-items-center">
        <button class="btn" onclick="showSection('homeSection')" aria-label="Back to Home"><i class="bi bi-arrow-left"></i> Home</button>
        <h1 class="h5 mb-0">About Us</h1>
        <div></div>
      </div>
    </header>
    <div class="container my-4">
      <p>We are a premium clothing and accessories store dedicated to providing high-quality products and exceptional customer service. Our passion is to make you look and feel your best.</p>
    </div>
  </div>

  <!-- Contact Us Section -->
  <div id="contactSection" class="section fade-in">
    <header class="py-3 border-bottom bg-light">
      <div class="container d-flex justify-content-between align-items-center">
        <button class="btn" onclick="showSection('homeSection')" aria-label="Back to Home"><i class="bi bi-arrow-left"></i> Home</button>
        <h1 class="h5 mb-0">Contact Us</h1>
        <div></div>
      </div>
    </header>
    <div class="container my-4">
      <form id="contactForm">
        <div class="mb-3">
          <label for="contactName" class="form-label">Name</label>
          <input type="text" class="form-control" id="contactName" placeholder="Your Name" required aria-label="Your Name" />
        </div>
        <div class="mb-3">
          <label for="contactEmail" class="form-label">Email Address</label>
          <input type="email" class="form-control" id="contactEmail" placeholder="Your Email" required aria-label="Your Email" />
        </div>
        <div class="mb-3">
          <label for="contactQuestion" class="form-label">Question</label>
          <textarea class="form-control" id="contactQuestion" placeholder="Your Question" required aria-label="Your Question"></textarea>
        </div>
        <button type="submit" class="btn btn-primary" aria-label="Send Message">Send</button>
      </form>
    </div>
  </div>

  <!-- Coupons Section -->
  <div id="couponsSection" class="section fade-in">
    <header class="py-3 border-bottom bg-light">
      <div class="container d-flex justify-content-between align-items-center">
        <button class="btn" onclick="showSection('homeSection')" aria-label="Back to Home"><i class="bi bi-arrow-left"></i> Home</button>
        <h1 class="h5 mb-0">Coupons</h1>
        <div></div>
      </div>
    </header>
    <div class="container my-4">
      <p>No coupons available at the moment. Check back later!</p>
    </div>
  </div>

  <!-- Offer Zone Section -->
  <div id="offerZoneSection" class="section fade-in">
    <header class="py-3 border-bottom bg-light">
      <div class="container d-flex justify-content-between align-items-center">
        <button class="btn" onclick="showSection('homeSection')" aria-label="Back to Home"><i class="bi bi-arrow-left"></i> Home</button>
        <h1 class="h5 mb-0">Offer Zone</h1>
        <div></div>
      </div>
    </header>
    <div class="container my-4">
      <p>Explore our exclusive offers and deals. Stay tuned for upcoming discounts!</p>
    </div>
  </div>

  <!-- Help Line Section -->
  <div id="helpSection" class="section fade-in">
    <header class="py-3 border-bottom bg-light">
      <div class="container d-flex justify-content-between align-items-center">
        <button class="btn" onclick="showSection('homeSection')" aria-label="Back to Home"><i class="bi bi-arrow-left"></i> Home</button>
        <h1 class="h5 mb-0">Help Line</h1>
        <div></div>
      </div>
    </header>
    <div class="container my-4">
      <p>For assistance, please call <strong>+91 7661838006</strong> or email us at <strong>tedpole.in@gmail.com</strong>.</p>
    </div>
  </div>

  <!-- Wishlist Section -->
  <div id="wishlistSection" class="section fade-in">
    <header class="py-3 border-bottom bg-light">
      <div class="container d-flex justify-content-between align-items-center">
        <button class="btn" onclick="showSection('homeSection')" aria-label="Back to Home"><i class="bi bi-arrow-left"></i> Home</button>
        <h1 class="h5 mb-0">Wishlist</h1>
        <div></div>
      </div>
    </header>
    <div class="container my-4" id="wishlistContainer"></div>
  </div>

  <!-- Categories Section -->
  <div id="categoriesSection" class="section fade-in">
    <header class="py-3 border-bottom bg-light">
      <div class="container d-flex justify-content-between align-items-center">
        <button class="btn" onclick="showSection('homeSection')" aria-label="Back to Home"><i class="bi bi-arrow-left"></i> Home</button>
        <h1 class="h5 mb-0">Categories</h1>
        <div></div>
      </div>
    </header>
    <div class="container my-4">
      <div class="row">
        <div class="col-6 mb-4">
          <div class="card shadow-sm" onclick="showSection('menswearSection')" style="cursor:pointer;">
            <img src="https://i.pinimg.com/474x/1e/d0/ed/1ed0ede5c364f2c8959976120f65271f.jpg" class="card-img-top" alt="Men's Wear" />
            <div class="card-body text-center">
              <h5 class="card-title">MEN'S WEAR</h5>
            </div>
          </div>
        </div>
        <div class="col-6 mb-4">
          <div class="card shadow-sm" onclick="showSection('accessoriesSection')" style="cursor:pointer;">
            <img src="https://i.pinimg.com/474x/f4/96/20/f496209cab01d85a80a84b785068c007.jpg" class="card-img-top" alt="Accessories" />
            <div class="card-body text-center">
              <h5 class="card-title">ACCESSORIES</h5>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Seller Dashboard Section -->
  <div id="sellerDashboard" class="section fade-in">
    <header class="py-3 border-bottom bg-light">
      <div class="container d-flex justify-content-between align-items-center">
        <button class="btn" onclick="showSection('homeSection')" aria-label="Back to Home"><i class="bi bi-arrow-left"></i> Home</button>
        <h1 class="h5 mb-0">Seller Dashboard</h1>
        <div></div>
      </div>
    </header>
    <div class="container" id="sellerDashboardContent"></div>
  </div>

  <!-- Owner Dashboard Section -->
  <div id="ownerDashboard" class="section fade-in">
    <header class="py-3 border-bottom bg-light">
      <div class="container d-flex justify-content-between align-items-center">
        <button class="btn" onclick="showSection('homeSection')" aria-label="Back to Home"><i class="bi bi-arrow-left"></i> Home</button>
        <h1 class="h5 mb-0">Owner Dashboard</h1>
        <button class="btn btn-primary" onclick="updateOwnerDashboard()" aria-label="Refresh Dashboard"><i class="bi bi-arrow-clockwise"></i> Refresh</button>
      </div>
    </header>
    <div class="container my-4">
      <h2>Website Statistics</h2>
      <div class="row mt-4">
        <div class="col-md-4">
          <div class="card text-center shadow-sm">
            <div class="card-body">
              <h5 class="card-title">Total Members</h5>
              <p class="card-text display-4" id="totalMembers">0</p>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card text-center shadow-sm">
            <div class="card-body">
              <h5 class="card-title">Active Users</h5>
              <p class="card-text display-4" id="activeUsers">0</p>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card text-center shadow-sm">
            <div class="card-body">
              <h5 class="card-title">Live Users</h5>
              <p class="card-text display-4" id="liveUsers">0</p>
            </div>
          </div>
        </div>
      </div>
      <h2 class="mt-5">Order Statistics</h2>
      <div class="row mt-4">
        <div class="col-md-3">
          <div class="card text-center shadow-sm">
            <div class="card-body">
              <h5 class="card-title">Total Orders</h5>
              <p class="card-text display-4" id="totalOrders">0</p>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card text-center shadow-sm">
            <div class="card-body">
              <h5 class="card-title">Active Orders</h5>
              <p class="card-text display-4" id="activeOrders">0</p>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card text-center shadow-sm">
            <div class="card-body">
              <h5 class="card-title">Cancelled Orders</h5>
              <p class="card-text display-4" id="cancelledOrders">0</p>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card text-center shadow-sm">
            <div class="card-body">
              <h5 class="card-title">Received Orders</h5>
              <p class="card-text display-4" id="receivedOrders">0</p>
            </div>
          </div>
        </div>
      </div>
      <h2 class="mt-5">Order Details</h2>
      <div id="orderDetailsContainer" class="mt-4"></div>
      <h2 class="mt-5">User Locations</h2>
      <div id="userLocationsContainer" class="mt-4"></div>
    </div>
  </div>

  <!-- Search Section -->
  <div id="searchSection" class="section fade-in">
    <header class="py-3 border-bottom bg-light">
      <div class="container d-flex justify-content-between align-items-center">
        <button class="btn" onclick="showSection('homeSection')" aria-label="Back to Home"><i class="bi bi-arrow-left"></i> Home</button>
        <h1 class="h5 mb-0">Search</h1>
        <div></div>
      </div>
    </header>
    <div class="container my-4">
      <div class="input-group mb-3">
        <input type="text" class="form-control" placeholder="Search for Products" id="searchSectionInput" autocomplete="off" aria-label="Search for Products" />
        <button class="btn btn-dark" type="button" id="searchSectionButton" aria-label="Search"><i class="bi bi-search"></i></button>
      </div>
      <div id="searchResultsContainer"></div>
    </div>
  </div>

  <!-- Login Section -->
  <div id="loginSection" class="section fade-in">
    <header class="bg-light py-3 border-bottom">
      <div class="container d-flex justify-content-between align-items-center">
        <button class="btn" onclick="showSection('homeSection')" aria-label="Back to Home"><i class="bi bi-arrow-left"></i> Home</button>
        <h1 class="h5 mb-0">Login</h1>
        <div></div>
      </div>
    </header>
    <div class="container my-4">
      <div class="row justify-content-center">
        <div class="col-12">
          <div class="card shadow-sm">
            <div class="card-body">
              <form id="loginForm">
                <div class="mb-3">
                  <label for="loginEmail" class="form-label">Email Address</label>
                  <input type="email" class="form-control" id="loginEmail" placeholder="Enter your email" required aria-label="Email Address" />
                </div>
                <div class="mb-3">
                  <label for="loginPassword" class="form-label">Password</label>
                  <input type="password" class="form-control" id="loginPassword" placeholder="Enter your password" required minlength="6" aria-label="Password" />
                </div>
                <button type="submit" class="btn btn-primary w-100" aria-label="Login to your account">Login</button>
              </form>
              <p class="mt-3 text-center">Don't have an account? <a href="#" onclick="showSection('signupSection')">Sign Up</a></p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Sign Up Section -->
  <div id="signupSection" class="section fade-in">
    <header class="bg-light py-3 border-bottom">
      <div class="container d-flex justify-content-between align-items-center">
        <button class="btn" onclick="showSection('homeSection')" aria-label="Back to Home"><i class="bi bi-arrow-left"></i> Home</button>
        <h1 class="h5 mb-0">Sign Up</h1>
        <div></div>
      </div>
    </header>
    <div class="container my-4">
      <div class="row justify-content-center">
        <div class="col-12">
          <div class="card shadow-sm">
            <div class="card-body">
              <form id="signupForm">
                <div class="row">
                  <div class="col-6 mb-3">
                    <label for="firstName" class="form-label">First Name</label>
                    <input type="text" class="form-control" id="firstName" placeholder="First Name" required aria-label="First Name" />
                  </div>
                  <div class="col-6 mb-3">
                    <label for="lastName" class="form-label">Last Name</label>
                    <input type="text" class="form-control" id="lastName" placeholder="Last Name" required aria-label="Last Name" />
                  </div>
                </div>
                <div class="mb-3">
                  <label for="mobileNumberSignUp" class="form-label">Mobile Number</label>
                  <input type="text" class="form-control" id="mobileNumberSignUp" placeholder="Enter your mobile number" required aria-label="Mobile Number" />
                </div>
                <div class="mb-3">
                  <label for="signupEmail" class="form-label">Email Address</label>
                  <input type="email" class="form-control" id="signupEmail" placeholder="Enter your email" required aria-label="Email Address" />
                </div>
                <div class="row">
                  <div class="col-6 mb-3">
                    <label for="signupPassword" class="form-label">Password</label>
                    <input type="password" class="form-control" id="signupPassword" placeholder="Password" required minlength="6" aria-label="Password" />
                  </div>
                  <div class="col-6 mb-3">
                    <label for="confirmPassword" class="form-label">Confirm Password</label>
                    <input type="password" class="form-control" id="confirmPassword" placeholder="Confirm Password" required minlength="6" aria-label="Confirm Password" />
                  </div>
                </div>
                <button type="submit" class="btn btn-primary w-100" aria-label="Sign Up">Sign Up</button>
              </form>
              <p class="mt-3 text-center">Already have an account? <a href="#" onclick="showSection('loginSection')">Login</a></p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Account Section -->
  <div id="accountSection" class="section fade-in">
    <header class="py-3 border-bottom bg-light">
      <div class="container d-flex justify-content-between align-items-center">
        <button class="btn" onclick="showSection('homeSection')" aria-label="Back to Home"><i class="bi bi-arrow-left"></i> Home</button>
        <h1 class="h5 mb-0">My Account</h1>
        <div></div>
      </div>
    </header>
    <div class="container my-4" id="accountContent"></div>
  </div>

  <!-- Cart Section -->
  <div id="cartSection" class="section fade-in">
    <header class="py-3 border-bottom bg-light">
      <div class="container d-flex justify-content-between align-items-center">
        <button class="btn" onclick="showSection('homeSection')" aria-label="Back to Home"><i class="bi bi-arrow-left"></i> Home</button>
        <h1 class="h5 mb-0">Your Bag</h1>
        <div></div>
      </div>
    </header>
    <div class="container my-4" id="cartContent"></div>
  </div>

  <!-- Shop Section -->
  <div id="shopSection" class="section fade-in">
    <header class="py-3 border-bottom bg-light">
      <div class="container d-flex justify-content-between align-items-center">
        <button class="btn" onclick="showSection('homeSection')" aria-label="Back to Home"><i class="bi bi-arrow-left"></i> Home</button>
        <h1 class="h5 mb-0">All Products</h1>
        <div></div>
      </div>
    </header>
    <div class="container my-4" id="shopFilterSection">
      <div id="filterSection">
        <h5>Filter Products</h5>
        <div class="row g-2">
          <div class="col-6 col-md-3">
            <select id="filterSize" class="form-select" aria-label="Filter by Size">
              <option value="">All Sizes</option>
              <option value="S">S</option>
              <option value="M">M</option>
              <option value="L">L</option>
              <option value="XL">XL</option>
              <option value="32">32</option>
              <option value="34">34</option>
              <option value="36">36</option>
            </select>
          </div>
          <div class="col-6 col-md-3">
            <select id="filterColor" class="form-select" aria-label="Filter by Color">
              <option value="">All Colors</option>
              <option value="Blue">Blue</option>
              <option value="Red">Red</option>
              <option value="Black">Black</option>
              <option value="Brown">Brown</option>
              <option value="White">White</option>
            </select>
          </div>
          <div class="col-6 col-md-3">
            <select id="filterPrice" class="form-select" aria-label="Filter by Price">
              <option value="">All Prices</option>
              <option value="100-150">₹100 - ₹150</option>
              <option value="150-200">₹150 - ₹200</option>
              <option value="200-250">₹200 - ₹250</option>
            </select>
          </div>
          <div class="col-6 col-md-3">
            <button class="btn btn-primary w-100" onclick="applyFilters()" aria-label="Apply Filters">Apply Filters</button>
          </div>
        </div>
        <div class="mt-2">
          <button class="btn btn-outline-danger" onclick="clearAllFilters()">Clear All Filters</button>
        </div>
        <div class="mt-2" id="activeFilterDisplay"></div>
      </div>
    </div>
    <div class="container my-4">
      <div class="row" id="shopProductContainer"></div>
    </div>
  </div>

  <!-- Men's Wear Section -->
  <div id="menswearSection" class="section fade-in">
    <header class="py-3 border-bottom bg-light">
      <div class="container d-flex justify-content-between align-items-center">
        <button class="btn" onclick="showSection('homeSection')" aria-label="Back to Home"><i class="bi bi-arrow-left"></i> Home</button>
        <h1 class="h5 mb-0">Men's Wear</h1>
        <div></div>
      </div>
    </header>
    <div class="container mb-3" id="menswearFilterSection">
      <div class="row g-2">
        <div class="col-4">
          <select id="menswearFilterSize" class="form-select" aria-label="Filter Men's Wear by Size">
            <option value="">All Sizes</option>
            <option value="S">S</option>
            <option value="M">M</option>
            <option value="L">L</option>
            <option value="XL">XL</option>
            <option value="32">32</option>
            <option value="34">34</option>
            <option value="36">36</option>
          </select>
        </div>
        <div class="col-4">
          <select id="menswearFilterColor" class="form-select" aria-label="Filter Men's Wear by Color">
            <option value="">All Colors</option>
            <option value="Blue">Blue</option>
            <option value="Red">Red</option>
            <option value="Black">Black</option>
            <option value="Brown">Brown</option>
            <option value="White">White</option>
          </select>
        </div>
        <div class="col-4">
          <select id="menswearFilterPrice" class="form-select" aria-label="Filter Men's Wear by Price">
            <option value="">All Prices</option>
            <option value="100-150">₹100 - ₹150</option>
            <option value="150-200">₹150 - ₹200</option>
            <option value="200-250">₹200 - ₹250</option>
          </select>
        </div>
      </div>
      <div class="mt-2">
        <button class="btn btn-primary" onclick="applyMenswearFilters()" aria-label="Apply Men's Wear Filters">Apply Filters</button>
        <button class="btn btn-outline-danger" onclick="clearMenswearFilters()" aria-label="Clear Men's Wear Filters">Clear Filters</button>
      </div>
      <div class="mt-2" id="menswearActiveFilterDisplay"></div>
    </div>
    <div class="container my-4">
      <div class="row" id="menswearContainer"></div>
    </div>
    <div class="container text-center mb-4">
      <button class="btn btn-success" onclick="showSection('cartSection')" aria-label="Proceed to Checkout">Checkout</button>
    </div>
  </div>

  <!-- Accessories Section -->
  <div id="accessoriesSection" class="section fade-in">
    <header class="py-3 border-bottom bg-light">
      <div class="container d-flex justify-content-between align-items-center">
        <button class="btn" onclick="showSection('homeSection')" aria-label="Back to Home"><i class="bi bi-arrow-left"></i> Home</button>
        <h1 class="h5 mb-0">Accessories</h1>
        <div></div>
      </div>
    </header>
    <div class="container mb-3" id="accessoriesFilterSection">
      <div class="row g-2">
        <div class="col-4">
          <select id="accessoriesFilterSize" class="form-select" aria-label="Filter Accessories by Size">
            <option value="">All Sizes</option>
            <option value="S">S</option>
            <option value="M">M</option>
            <option value="L">L</option>
            <option value="XL">XL</option>
            <option value="One Size">One Size</option>
          </select>
        </div>
        <div class="col-4">
          <select id="accessoriesFilterColor" class="form-select" aria-label="Filter Accessories by Color">
            <option value="">All Colors</option>
            <option value="Blue">Blue</option>
            <option value="Red">Red</option>
            <option value="Black">Black</option>
            <option value="Brown">Brown</option>
            <option value="White">White</option>
          </select>
        </div>
        <div class="col-4">
          <select id="accessoriesFilterPrice" class="form-select" aria-label="Filter Accessories by Price">
            <option value="">All Prices</option>
            <option value="100-150">₹100 - ₹150</option>
            <option value="150-200">₹150 - ₹200</option>
            <option value="200-250">₹200 - ₹250</option>
          </select>
        </div>
      </div>
      <div class="mt-2">
        <button class="btn btn-primary" onclick="applyAccessoriesFilters()" aria-label="Apply Accessories Filters">Apply Filters</button>
        <button class="btn btn-outline-danger" onclick="clearAccessoriesFilters()" aria-label="Clear Accessories Filters">Clear Filters</button>
      </div>
      <div class="mt-2" id="accessoriesActiveFilterDisplay"></div>
    </div>
    <div class="container my-4">
      <div class="row" id="accessoriesContainer"></div>
    </div>
    <div class="container text-center mb-4">
      <button class="btn btn-success" onclick="showSection('cartSection')" aria-label="Proceed to Checkout">Checkout</button>
    </div>
  </div>

  <!-- My Orders Section -->
  <div id="ordersSection" class="section fade-in">
    <header class="py-3 border-bottom bg-light">
      <div class="container d-flex justify-content-between align-items-center">
        <button class="btn" onclick="showSection('homeSection')" aria-label="Back to Home"><i class="bi bi-arrow-left"></i> Home</button>
        <h1 class="h5 mb-0">My Orders</h1>
        <div></div>
      </div>
    </header>
    <div class="container my-4" id="ordersList"></div>
  </div>

  <!-- Order Detail Section -->
  <div id="orderDetailSection" class="section fade-in">
    <header class="py-3 border-bottom bg-light">
      <div class="container d-flex justify-content-between align-items-center">
        <button class="btn" onclick="showSection('ordersSection')" aria-label="Back to Orders"><i class="bi bi-arrow-left"></i> Back to Orders</button>
        <h1 class="h5 mb-0">Order Details</h1>
        <div></div>
      </div>
    </header>
    <div class="container my-4" id="orderDetailPage"></div>
  </div>

  <!-- Product Detail Section -->
  <div id="productDetailSection" class="section fade-in">
    <header class="py-3 border-bottom bg-light">
      <div class="container d-flex justify-content-between align-items-center">
        <button class="btn" onclick="showSection('shopSection')" aria-label="Back to Shop"><i class="bi bi-arrow-left"></i> Back to Shop</button>
        <h1 class="h5 mb-0">Product Details</h1>
        <div></div>
      </div>
    </header>
    <div class="container my-4" id="productDetailPage"></div>
  </div>

  <!-- Buy Now Modal -->
  <div class="modal fade" id="buyModal" tabindex="-1" aria-labelledby="buyModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content shadow-sm">
        <div class="modal-header">
          <h5 class="modal-title" id="buyModalLabel">Enter Shipping Details</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="buyForm">
            <input type="hidden" name="csrf_token" value="some-token-value" />
            <div class="mb-3">
              <label for="shippingAddress" class="form-label">Address</label>
              <textarea class="form-control" id="shippingAddress" required aria-label="Shipping Address"></textarea>
            </div>
            <div class="mb-3">
              <label for="mobileNumber" class="form-label">Mobile Number</label>
              <input type="text" class="form-control" id="mobileNumber" required aria-label="Mobile Number" />
            </div>
            <div class="mb-3">
              <label for="additionalDetails" class="form-label">Additional Details</label>
              <textarea class="form-control" id="additionalDetails" aria-label="Additional Details"></textarea>
            </div>
            <div class="mb-3">
              <label class="form-label">Payment Method</label>
              <input type="text" class="form-control" value="Cash on Delivery" disabled aria-label="Payment Method" />
            </div>
            <!-- Display Product Details -->
            <div class="mb-3">
              <p><strong>Product:</strong> <span id="modalProductName"></span></p>
              <p><strong>Size:</strong> <span id="modalProductSize"></span></p>
              <p><strong>Color:</strong> <span id="modalProductColor"></span></p>
              <p><strong>Price:</strong> ₹<span id="modalProductPrice"></span></p>
              <p><strong>Estimated Delivery:</strong> <span id="modalDeliveryTime"></span></p>
              <p><strong>Total Amount:</strong> ₹<span id="modalTotalAmount"></span></p>
            </div>
            <hr />
            <button type="submit" class="btn btn-primary">Confirm Order</button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Product Images Modal -->
  <div class="modal fade" id="productImagesModal" tabindex="-1" aria-labelledby="productImagesModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content shadow-sm">
        <div class="modal-header">
          <h5 class="modal-title" id="productImagesModalLabel">Product Images</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div id="productCarousel" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-inner" id="carouselInner"></div>
            <button class="carousel-control-prev" type="button" data-bs-target="#productCarousel" data-bs-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#productCarousel" data-bs-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Next</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Track Order Modal -->
  <div class="modal fade" id="trackOrderModal" tabindex="-1" aria-labelledby="trackOrderModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content shadow-sm">
        <div class="modal-header">
          <h5 class="modal-title" id="trackOrderModalLabel">Track Order</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body" id="trackOrderContent"></div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
<!-- Product Image Zoom Modal -->
<div class="modal fade" id="productImageModal" tabindex="-1" aria-labelledby="productImageModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="productImageModalLabel">Product Image</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <img id="modalProductImage" src="" class="img-fluid" alt="Product Image">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" onclick="zoomImage(1.2)">Zoom In</button>
        <button type="button" class="btn btn-secondary" onclick="zoomImage(0.8)">Zoom Out</button>
        <button type="button" class="btn btn-secondary" onclick="resetZoom()">Reset Zoom</button>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
  <!-- Fixed Footer Navigation -->
  <footer class="footer-nav fixed-bottom">
    <div class="container d-flex justify-content-around">
      <div class="nav-item">
        <button class="btn btn-link nav-link" onclick="showSection('homeSection')" aria-label="Home">
          <i class="fas fa-home fa-lg"></i><br><span class="nav-text">HOME</span>
        </button>
      </div>
      <div class="nav-item">
        <button class="btn btn-link nav-link" onclick="showSection('categoriesSection')" aria-label="Shop">
          <i class="fas fa-th-large fa-lg"></i><br><span class="nav-text">SHOP</span>
        </button>
      </div>
      <div class="nav-item">
        <button class="btn btn-link nav-link" onclick="showSection('searchSection')" aria-label="Search">
          <i class="fas fa-search fa-lg"></i><br><span class="nav-text">SEARCH</span>
        </button>
      </div>
      <div class="nav-item">
        <button class="btn btn-link nav-link" onclick="showSection('wishlistSection')" aria-label="Wishlist">
          <i class="fas fa-heart fa-lg"></i><br><span class="nav-text">WISHLIST</span>
        </button>
      </div>
      <div class="nav-item">
        <button class="btn btn-link nav-link" onclick="showSection('cartSection')" aria-label="Your Bag">
          <i class="fas fa-shopping-bag fa-lg"></i><br><span class="nav-text">BAG</span>
          <span class="footer-bag-badge" id="footerBagBadge">0</span>
        </button>
      </div>
    </div>
  </footer>

  <!-- JavaScript -->
  <script>
    // Global variables
    let users = [];
    let cart = [];
    let orders = [];
    let notifications = [];
    let ownerNotifications = [];
    let wishlist = [];
    let currentUser = null;
    let currentProductForPurchase = null;
    let currentOrderIndex = null;
    let activeFilters = {};
    let menswearActiveFilters = {};
    let accessoriesActiveFilters = {};

    const locations = ["New York", "Los Angeles", "Chicago", "Houston", "Phoenix"];
    const colorMap = { "Blue": "#0000FF", "Red": "#FF0000", "Black": "#000000", "Brown": "#8B4513", "White": "#FFFFFF" };

    const products = [
    {
      id: 1,
      name: "Casual Shirt",
      description: "Comfortable and stylish men's t-shirt.",
      category: "Men's Wear",
      price: 19.99,
      size: "S, M, L, XL",
      color: "Blue, Red, Black",
      clothType: "100% Cotton",
      deliveryTime: "3-5 days",
      returnPolicy: "10 days return policy",
      additionalDetails: "Machine washable, soft and breathable fabric.",
      images: [
        "https://i.pinimg.com/474x/a2/46/9b/a2469b27a79d4853f1fa20114c5e9fe6.jpg"
      ],
      colorImages: {
        "Blue": "https://i.pinimg.com/474x/2d/94/0b/2d940bf9a87c975563445088889db80e.jpg",
        "Red": "https://i.pinimg.com/474x/9b/e5/57/9be5570d3ed2ae5ccea0b5350259fe15.jpg",
        "Black": "https://i.pinimg.com/474x/12/36/ad/1236ad818c0561546a861e5a97dc37b1.jpg"
      }
    },
      {
        id: 3,
        name: "Denim Jeans",
        description: "Trendy and comfortable denim jeans.",
        category: "Men's Wear",
        price: 39.99,
        size: "32, 34, 36",
        color: "Blue,Black",
        clothType: "Denim",
        deliveryTime: "4-6 days",
        returnPolicy: "10 days return policy",
        additionalDetails: "Slim fit design. Durable and stylish.",
        images: [
          "https://i.pinimg.com/474x/93/d5/c4/93d5c498f9800930a8012a4a53bdbaec.jpg",
          "https://i.pinimg.com/474x/33/ec/71/33ec716cc1c75f58fc99fd5e7d221024.jpg"
        ],
        colorImages: {
          "Blue": "https://i.pinimg.com/474x/3e/21/6e/3e216e3c3ee793f79269c2ad441697c5.jpg",
          "Black": "https://i.pinimg.com/474x/cd/5c/14/cd5c14c5a5daff62ee33d104ae4a381a.jpg"
        }
      },
      {
        id: 4,
        name: "Sunglasses",
        description: "Stylish sunglasses to match any outfit.",
        category: "Accessories",
        price: 29.99,
        size: "One Size",
        color: "Black, Brown",
        clothType: "Plastic",
        deliveryTime: "3-5 days",
        returnPolicy: "10 days return policy",
        additionalDetails: "UV protection lenses.",
        images: [
          "https://i.pinimg.com/474x/84/17/a8/8417a8928ca921fd76cc441293133ffb.jpg"
        ],
        colorImages: {
          "Black": "https://i.pinimg.com/474x/04/79/52/047952b3abe30a9c4d2636ba986a5890.jpg",
          "Brown": "https://i.pinimg.com/474x/84/17/a8/8417a8928ca921fd76cc441293133ffb.jpg"
        }
      }
    ];

    // Load data from localStorage
    function loadData() {
      const storedUsers = localStorage.getItem("users");
      const storedCart = localStorage.getItem("cart");
      const storedOrders = localStorage.getItem("orders");
      const storedNotifications = localStorage.getItem("notifications");
      const storedOwnerNotifications = localStorage.getItem("ownerNotifications");
      const storedWishlist = localStorage.getItem("wishlist");
      const storedCurrentUser = localStorage.getItem("currentUser");

      if (storedUsers) users = JSON.parse(storedUsers);
      if (storedCart) cart = JSON.parse(storedCart);
      if (storedOrders) orders = JSON.parse(storedOrders);
      if (storedNotifications) notifications = JSON.parse(storedNotifications);
      if (storedOwnerNotifications) ownerNotifications = JSON.parse(storedOwnerNotifications);
      if (storedWishlist) wishlist = JSON.parse(storedWishlist);
      if (storedCurrentUser) {
        currentUser = JSON.parse(storedCurrentUser);
        if (currentUser && !currentUser.isLoggedIn) currentUser = null;
      }
      updateHeaderProfile();
      updateMenuAccountDetails();
      updateCartCountBadge();
      updateOrdersList();
    }

    // Save data to localStorage
    function saveData() {
      localStorage.setItem("users", JSON.stringify(users));
      localStorage.setItem("cart", JSON.stringify(cart));
      localStorage.setItem("orders", JSON.stringify(orders));
      localStorage.setItem("notifications", JSON.stringify(notifications));
      localStorage.setItem("ownerNotifications", JSON.stringify(ownerNotifications));
      localStorage.setItem("wishlist", JSON.stringify(wishlist));
      localStorage.setItem("currentUser", JSON.stringify(currentUser));
    }

    // Update header profile
    function updateHeaderProfile() {
      const profileElement = document.getElementById("headerProfile");
      profileElement.textContent = currentUser ? `${currentUser.firstName} ${currentUser.lastName}` : "";
    }

    // Hide menu
    function hideMenu() {
      const menuCanvas = bootstrap.Offcanvas.getInstance(document.getElementById("menuCanvas"));
      if (menuCanvas) menuCanvas.hide();
    }

    // Generate products
    function generateProducts(containerId, productList) {
      const container = document.getElementById(containerId);
      if (!productList.length) {
        container.innerHTML = "<p>No products available.</p>";
        return;
      }
      let html = "";
      productList.forEach(product => {
        const image = product.images && product.images.length ? product.images[0] : 'https://via.placeholder.com/400x300?text=' + encodeURIComponent(product.name);
        const originalPrice = (product.price * 1.2).toFixed(2);
        const discount = ((originalPrice - product.price) / originalPrice * 100).toFixed(0);
        html += `
          <div class="col-6 col-md-4 mb-4">
            <div class="card shadow-sm" style="cursor: pointer;" onclick="showProductDetails(${product.id})">
              <img src="${image}" class="card-img-top" alt="${product.name}">
              <div class="card-body">
                <h5 class="card-title">${product.name}</h5>
                <p class="card-text">${product.description}</p>
                <p class="card-text"><s>₹${originalPrice}</s> ₹${product.price.toFixed(2)} <span class="badge bg-success"><i class="bi bi-arrow-down"></i> ${discount}% off</span></p>
               </div>
                <button class="wishlist-btn position-absolute top-0 end-0 m-2" onclick="event.stopPropagation(); addToWishlist(${product.id})" aria-label="Add ${product.name} to Wishlist">
                <i class="fas fa-heart"></i>
              </button>
            </div>
          </div>
        `;
      });
      container.innerHTML = html;
    }

   // Show product details with size and color selection and icons
   function showProductDetails(productId) {
    const product = products.find(p => p.id === productId);
    if (!product) return;
  
    const sizes = product.size.split(",").map(s => s.trim());
    const colors = product.color.split(",").map(c => c.trim());
  
    let sizeButtons = sizes.map(size => `
      <button type="button" class="btn btn-outline-secondary size-btn" data-size="${size}" onclick="selectSize('${size}')">${size}</button>
    `).join("");
  
    let colorThumbnails = colors.map(color => {
      const imageUrl = product.colorImages[color];
      return `
        <div class="color-thumbnail" data-color="${color}" onclick="selectColor('${color}')">
          <img src="${imageUrl}" alt="${color}" style="width: 50px; height: 50px;" />
        </div>
      `;
    }).join("");
  
    const detailContent = `
      <div class="row">
        <div class="col-md-6">
          ${generateProductImageHTML(product)}
        </div>
        <div class="col-md-6">
          <h3>${product.name}</h3>
          <p>${product.description}</p>
          <p><i class="fas fa-tag"></i> <strong>Price:</strong> <s>₹${(product.price * 1.2).toFixed(2)}</s> ₹${product.price.toFixed(2)}</p>
          <p><i class="fas fa-list-alt"></i> <strong>Category:</strong> ${product.category}</p>
          <p><i class="fas fa-tshirt"></i> <strong>Cloth Type:</strong> ${product.clothType}</p>
          <p><i class="fas fa-truck"></i> <strong>Delivery:</strong> ${product.deliveryTime}</p>
          <p><i class="fas fa-undo"></i> <strong>Return:</strong> ${product.returnPolicy}</p>
          <p><i class="fas fa-info-circle"></i> <strong>Details:</strong> ${product.additionalDetails}</p>
          <div class="mb-3">
            <label><strong>Sizes:</strong></label><br>
            ${sizeButtons}
          </div>
          <div class="mb-3">
            <label><strong>Colors:</strong></label><br>
            ${colorThumbnails}
          </div>
          <button class="btn btn-success w-100 mb-2" onclick="buyProductWithSelection(${product.id})">
            <i class="fas fa-shopping-cart me-1"></i> Buy Now
          </button>
          <button class="btn btn-primary w-100" onclick="addToCartWithSelection(${product.id})">
            <i class="fas fa-cart-plus me-1"></i> Add to Bag
          </button>
        </div>
      </div>
    `;
    document.getElementById("productDetailPage").innerHTML = detailContent;
    document.getElementById("productDetailSection").dataset.productId = productId;
    const firstColor = colors[0];
    selectColor(firstColor);
    showSection("productDetailSection");
  }
    // Select size
    function selectSize(size) {
      document.querySelectorAll(".size-btn").forEach(btn => btn.classList.remove("active"));
      const button = document.querySelector(`.size-btn[data-size="${size}"]`);
      button.classList.add("active");
      document.getElementById("productDetailSection").dataset.selectedSize = size;
    }

    // Select color
    function selectColor(color) {
      // Remove selected class from all thumbnails
      document.querySelectorAll(".color-thumbnail").forEach(thumb => thumb.classList.remove("selected"));
      // Add selected class to the clicked thumbnail
      const thumbnail = document.querySelector(`.color-thumbnail[data-color="${color}"]`);
      if (thumbnail) thumbnail.classList.add("selected");
      // Change main image
      const productId = parseInt(document.getElementById("productDetailSection").dataset.productId);
      const product = products.find(p => p.id === productId);
      if (product && product.colorImages[color]) {
        document.getElementById("mainProductImage").src = product.colorImages[color];
      }
      // Set selected color
      document.getElementById("productDetailSection").dataset.selectedColor = color;
    }

    // Buy product with selection
    function buyProductWithSelection(productId) {
      if (!currentUser) {
        showNotification("Please log in or sign up before placing an order.", "warning");
        showSection("loginSection");
        return;
      }
      const selectedSize = document.getElementById("sizeSelect")?.value || document.getElementById("productDetailSection").dataset.selectedSize;
      const selectedColor = document.getElementById("productDetailSection").dataset.selectedColor;
      if (!selectedSize || !selectedColor) {
        showNotification("Please select size and color.", "warning");
        return;
      }
      const product = products.find(p => p.id === productId);
      if (product) {
        currentProductForPurchase = { ...product, selectedSize, selectedColor };
        const daysRange = product.deliveryTime.match(/\d+-\d+/)[0];
        const maxDays = parseInt(daysRange.split("-")[1]);
        const today = new Date();
        const estimatedDeliveryDate = new Date(today);
        estimatedDeliveryDate.setDate(today.getDate() + maxDays);
        const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        const formattedDate = estimatedDeliveryDate.toLocaleDateString('en-US', options);
        document.getElementById("modalProductName").textContent = product.name;
        document.getElementById("modalProductSize").textContent = selectedSize;
        document.getElementById("modalProductColor").textContent = selectedColor;
        document.getElementById("modalProductPrice").textContent = product.price.toFixed(2);
        document.getElementById("modalDeliveryTime").textContent = formattedDate;
        document.getElementById("modalTotalAmount").textContent = (product.price + 5).toFixed(2); // Assuming +5 for shipping
        document.getElementById("buyForm").reset();
        const buyModal = new bootstrap.Modal(document.getElementById("buyModal"));
        buyModal.show();
      }
    }

    // Add to cart with selection
    function addToCartWithSelection(productId) {
      const selectedSize = document.getElementById("sizeSelect")?.value || document.getElementById("productDetailSection").dataset.selectedSize;
      const selectedColor = document.getElementById("productDetailSection").dataset.selectedColor;
      if (!selectedSize || !selectedColor) {
        showNotification("Please select size and color.", "warning");
        return;
      }
      const product = products.find(p => p.id === productId);
      if (product) {
        const cartItem = { ...product, selectedSize, selectedColor };
        cart.push(cartItem);
        showNotification(`${product.name} added to your with size ${selectedSize} and color ${selectedColor}.`, "info");
        updateCartCountBadge();
        saveData();
      }
    }

    // Show notification
    function showNotification(message, type = "success") {
      const notif = { message, type, date: new Date().toLocaleString() };
      notifications.push(notif);
      saveData();
      updateNotifications();

      const toastContainer = document.getElementById("toastContainer");
      const toastEl = document.createElement("div");
      toastEl.className = `toast align-items-center text-white bg-${type === "success" ? "success" : (type === "danger" ? "danger" : "warning")} border-0 mb-2`;
      toastEl.innerHTML = `
        <div class="d-flex">
          <div class="toast-body">${message}</div>
          <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
      `;
      toastContainer.appendChild(toastEl);
      const toast = new bootstrap.Toast(toastEl, { delay: 3000 });
      toast.show();
      toastEl.addEventListener('hidden.bs.toast', () => toastEl.remove());
    }

    // Show popup message
    function showPopupMessage(message) {
      document.getElementById("popupMessageContent").innerHTML = message;
      const popupModal = new bootstrap.Modal(document.getElementById("popupMessageModal"));
      popupModal.show();
    }

    // Add to wishlist
    function addToWishlist(productId) {
      const product = products.find(p => p.id === productId);
      if (!product) return;
      if (wishlist.some(p => p.id === productId)) {
        showNotification(`${product.name} is already in your wishlist.`, "info");
      } else {
        wishlist.push(product);
        showNotification(`${product.name} added to your wishlist.`, "success");
        saveData();
        updateWishlistSection();
      }
    }

    // Update wishlist section
    function updateWishlistSection() {
      const wishlistContainer = document.getElementById("wishlistContainer");
      if (wishlist.length === 0) {
        wishlistContainer.innerHTML = "<p>Your wishlist is empty.</p>";
        return;
      }
      let html = "";
      wishlist.forEach((item, index) => {
        html += `
          <div class="card mb-3 shadow-sm" onclick="showProductDetails(${item.id})" style="cursor: pointer;">
            <div class="row g-0">
              <div class="col-4">
                <img src="${item.images && item.images.length ? item.images[0] : 'https://via.placeholder.com/400x300?text=' + encodeURIComponent(item.name)}" class="img-fluid rounded-start" alt="${item.name}">
              </div>
              <div class="col-8">
                <div class="card-body">
                  <h5 class="card-title">${item.name}</h5>
                  <p class="card-text">${item.description}</p>
                  <button class="btn btn-sm btn-danger" onclick="event.stopPropagation(); removeFromWishlist(${index})" aria-label="Remove ${item.name} from Wishlist"><i class="bi bi-trash me-1"></i> Remove</button>
                </div>
              </div>
            </div>
          </div>
        `;
      });
      wishlistContainer.innerHTML = html;
    }

    // Remove from wishlist
    function removeFromWishlist(index) {
      if (confirm("Are you sure you want to remove this item from your wishlist?")) {
        wishlist.splice(index, 1);
        updateWishlistSection();
        showNotification("Item removed from wishlist.", "info");
        saveData();
      }
    }

    // Update user activity
    function updateUserActivity() {
      if (currentUser) {
        currentUser.lastActivity = new Date().toISOString();
        const userIndex = users.findIndex(u => u.email === currentUser.email);
        if (userIndex !== -1) users[userIndex].lastActivity = currentUser.lastActivity;
        saveData();
      }
    }

    // Get active users (last 5 minutes)
    function getActiveUsers() {
      const now = new Date();
      const fiveMinutesAgo = new Date(now - 5 * 60 * 1000);
      return users.filter(user => new Date(user.lastActivity) > fiveMinutesAgo).length;
    }

    // Get live users (last 1 minute)
    function getLiveUsers() {
      const now = new Date();
      const oneMinuteAgo = new Date(now - 1 * 60 * 1000);
      return users.filter(user => new Date(user.lastActivity) > oneMinuteAgo).length;
    }

    // Update owner dashboard
    function updateOwnerDashboard() {
      document.getElementById("totalMembers").textContent = users.length;
      document.getElementById("activeUsers").textContent = getActiveUsers();
      document.getElementById("liveUsers").textContent = getLiveUsers();

      const totalOrders = orders.length;
      const activeOrders = orders.filter(order => !order.cancelled && !order.received).length;
      const cancelledOrders = orders.filter(order => order.cancelled).length;
      const receivedOrders = orders.filter(order => order.received).length;

      document.getElementById("totalOrders").textContent = totalOrders;
      document.getElementById("activeOrders").textContent = activeOrders;
      document.getElementById("cancelledOrders").textContent = cancelledOrders;
      document.getElementById("receivedOrders").textContent = receivedOrders;

      let orderHtml = "";
      orders.forEach((order, index) => {
        orderHtml += `
          <div class="card mb-3">
            <div class="card-header">Order #${index + 1}</div>
            <div class="card-body">
              <p><strong>Product:</strong> ${order.product.name}</p>
              <p><strong>Buyer:</strong> ${order.buyer.firstName} ${order.buyer.lastName}</p>
              <p><strong>Status:</strong> ${order.cancelled ? 'Cancelled' : (order.received ? 'Received' : 'Active')}</p>
            </div>
          </div>
        `;
      });
      document.getElementById("orderDetailsContainer").innerHTML = orderHtml;

      let locationsHtml = "";
      users.forEach(user => {
        locationsHtml += `
          <div class="card mb-3">
            <div class="card-body">
              <p><strong>User:</strong> ${user.firstName} ${user.lastName}</p>
              <p><strong>Location:</strong> ${user.location}</p>
            </div>
          </div>
        `;
      });
      document.getElementById("userLocationsContainer").innerHTML = locationsHtml;
    }

    // Show section
    function showSection(sectionId) {
      document.querySelectorAll(".section").forEach(section => section.classList.remove("active-section", "fade-in"));
      const targetSection = document.getElementById(sectionId);
      targetSection.classList.add("active-section", "fade-in");
      if (sectionId !== "productDetailSection") {
        delete document.getElementById("productDetailSection").dataset.selectedSize;
        delete document.getElementById("productDetailSection").dataset.selectedColor;
      }
      updateUserActivity();
      if (sectionId === "shopSection") {
        applyFilters();
      } else if (sectionId === "menswearSection") {
        applyMenswearFilters();
      } else if (sectionId === "accessoriesSection") {
        applyAccessoriesFilters();
      } else if (sectionId === "wishlistSection") {
        updateWishlistSection();
      } else if (sectionId === "accountSection") {
        updateAccountSection();
      } else if (sectionId === "cartSection") {
        updateCartSection();
      } else if (sectionId === "notificationsSection") {
        updateNotifications();
      } else if (sectionId === "ordersSection") {
        updateOrdersList();
      } else if (sectionId === "sellerDashboard" || sectionId === "ownerDashboard") {
        if (currentUser && currentUser.email === "tedpole.in@gmail.com") {
          sectionId === "sellerDashboard" ? updateSellerDashboard() : updateOwnerDashboard();
        } else {
          showNotification("Access denied. Only the owner can view this dashboard.", "danger");
          showSection("homeSection");
        }
      }
    }

    // Generate product image HTML
    function generateProductImageHTML(product) {
      const defaultColor = product.color.split(",")[0].trim();
      const defaultImage = product.colorImages[defaultColor];
      return `<img id="mainProductImage" src="${defaultImage}" class="product-detail-img" alt="${product.name}">`;
    }

    // Buy form submission
    document.getElementById("buyForm").addEventListener("submit", function(e) {
      e.preventDefault();
      if (!currentUser) {
        showNotification("Please log in or sign up before placing an order.", "warning");
        showSection("loginSection");
        return;
      }
      const address = document.getElementById("shippingAddress").value;
      const mobile = document.getElementById("mobileNumber").value;
      const details = document.getElementById("additionalDetails").value;
      const daysRange = currentProductForPurchase.deliveryTime.match(/\d+-\d+/)[0];
      const maxDays = parseInt(daysRange.split("-")[1]);
      const orderDate = new Date();
      const estimatedDeliveryDate = new Date(orderDate);
      estimatedDeliveryDate.setDate(orderDate.getDate() + maxDays);
      const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
      const formattedDate = estimatedDeliveryDate.toLocaleDateString('en-US', options);
      const order = {
        product: currentProductForPurchase,
        address,
        mobile,
        details,
        payment: "Cash on Delivery",
        date: orderDate.toLocaleString(),
        cancelled: false,
        cancellationReason: "",
        trackingStatus: "Order Confirmed",
        buyer: currentUser,
        qrData: `Order #${orders.length + 1}\nProduct: ${currentProductForPurchase.name}\nSize: ${currentProductForPurchase.selectedSize}\nColor: ${currentProductForPurchase.selectedColor}\nAddress: ${address}\nMobile: ${mobile}\nBuyer: ${currentUser.firstName} ${currentUser.lastName}\nDate: ${orderDate.toLocaleString()}`,
        received: false,
        receivedDate: null,
        rating: null,
        review: null
      };
      orders.push(order);
      const orderIndex = orders.length - 1;
      showPopupMessage(`
        <h5>Thank You for Your Order!</h5>
        <p><strong>Product:</strong> ${currentProductForPurchase.name}</p>
        <p><strong>Size:</strong> ${currentProductForPurchase.selectedSize}</p>
        <p><strong>Color:</strong> ${currentProductForPurchase.selectedColor}</p>
        <p><strong>Estimated Delivery:</strong> ${formattedDate}</p>
        <p><strong>Shipping Address:</strong> ${address}</p>
        <p>Your order has been placed successfully. We will deliver it to you soon.</p>
      `);
      notifyOwner(`New order placed by: ${currentUser.firstName} ${currentUser.lastName} (${currentUser.email}) for product: ${order.product.name} (Size: ${order.product.selectedSize}, Color: ${order.product.selectedColor}) at ₹${order.product.price.toFixed(2)} - Order #${orderIndex + 1}`);
      saveData();
      const buyModal = bootstrap.Modal.getInstance(document.getElementById("buyModal"));
      buyModal.hide();
    });

    // Update cart count badge
    function updateCartCountBadge() {
      document.getElementById("footerBagBadge").textContent = cart.length;
    }

    // Update cart section
    function updateCartSection() {
      const cartContent = document.getElementById("cartContent");
      if (cart.length === 0) {
        cartContent.innerHTML = "<p>Your bag is empty.</p>";
        return;
      }
      let html = "";
      cart.forEach((item, index) => {
        html += `
          <div class="card mb-3 shadow-sm" onclick="showProductDetails(${item.id})" style="cursor: pointer;">
            <div class="row g-0">
              <div class="col-4">
                <img src="${item.images && item.images.length ? item.images[0] : 'https://via.placeholder.com/400x300?text=' + encodeURIComponent(item.name)}" class="img-fluid rounded-start" alt="${item.name}">
              </div>
              <div class="col-8">
                <div class="card-body">
                  <h5 class="card-title">${item.name}</h5>
                  <p class="card-text">${item.description}</p>
                  <p class="card-text">Size: ${item.selectedSize}, Color: ${item.selectedColor}</p>
                  <p class="card-text"><small class="text-muted">${item.category} | <s>₹${(item.price * 1.2).toFixed(2)}</s> ₹${item.price.toFixed(2)}</small></p>
                  <button class="btn btn-sm btn-danger" onclick="event.stopPropagation(); removeFromCart(${index})"><i class="bi bi-trash me-1"></i> Remove</button>
                </div>
              </div>
            </div>
          </div>
        `;
      });
      html += `<button class="btn btn-success">Checkout</button>`;
      cartContent.innerHTML = html;
    }

    // Remove from cart
    function removeFromCart(index) {
      if (confirm("Are you sure you want to remove this item from your bag?")) {
        cart.splice(index, 1);
        updateCartSection();
        updateCartCountBadge();
        showNotification("Item removed from bag.", "info");
        saveData();
      }
    }

    // Update account section
    function updateAccountSection() {
      const accountContent = document.getElementById("accountContent");
      if (currentUser) {
        accountContent.innerHTML = `
          <div class="card shadow-sm">
            <div class="card-body">
              <h3>Welcome, ${currentUser.firstName} ${currentUser.lastName}</h3>
              <p><strong>Email:</strong> ${currentUser.email}</p>
              <p><strong>Mobile Number:</strong> ${currentUser.mobile || "Not provided"}</p>
              <button class="btn btn-secondary" onclick="logout()">Logout</button>
            </div>
          </div>
        `;
      } else {
        accountContent.innerHTML = "<p>No user details available. Please log in.</p>";
      }
    }
      // Calculate estimated delivery dates
      function calculateDeliveryDate(orderDate, deliveryTime) {
        const [minDays, maxDays] = deliveryTime.split('-').map(s => parseInt(s.trim().replace(' days', '')));
        const orderDateObj = new Date(orderDate);
        const minDeliveryDate = new Date(orderDateObj);
        minDeliveryDate.setDate(orderDateObj.getDate() + minDays);
        const maxDeliveryDate = new Date(orderDateObj);
        maxDeliveryDate.setDate(orderDateObj.getDate() + maxDays);
        return {
          min: minDeliveryDate.toLocaleDateString(),
          max: maxDeliveryDate.toLocaleDateString()
        };
      }

   // Update orders list with delete button
   function updateOrdersList() {
    const ordersList = document.getElementById("ordersList");
    if (!currentUser || orders.length === 0) {
      ordersList.innerHTML = "<p>You have not placed any orders yet.</p>";
    } else {
      let html = "";
      const userOrders = orders.filter(order => order.buyer.email === currentUser.email);
      userOrders.forEach((order) => {
        const originalIndex = orders.indexOf(order);
        const productImage = order.product.images && order.product.images.length > 0 ? order.product.images[0] : 'https://via.placeholder.com/100x100?text=No+Image';
        html += `
          <div class="card mb-3 shadow-sm">
            <div class="card-header">
              <span>Order #${originalIndex + 1} - ${order.date}</span>
              <button class="btn btn-sm btn-danger float-end" onclick="deleteOrder(${originalIndex}); event.stopPropagation();">Delete</button>
            </div>
            <div class="card-body d-flex align-items-center" onclick="showOrderDetailPage(${originalIndex})" style="cursor:pointer;">
              <img src="${productImage}" style="max-height:50px; margin-right:10px;" alt="${order.product.name}">
              <div>
                <span>${order.product.name} (Size: ${order.product.selectedSize}, Color: ${order.product.selectedColor})</span><br>
                <span class="badge bg-${order.cancelled ? 'danger' : (order.received ? 'success' : 'primary')} ms-2">${order.cancelled ? 'Cancelled' : (order.received ? 'Received' : 'Active')}</span>
              </div>
            </div>
          </div>
        `;
      });
      ordersList.innerHTML = html || "<p>You have not placed any orders yet.</p>";
    }
  }

  // Delete order
  function deleteOrder(index) {
    if (confirm("Are you sure you want to delete this order? This action cannot be undone.")) {
      const deletedOrder = orders[index];
      orders.splice(index, 1);
      showNotification("Order deleted successfully.", "info");
      notifyOwner(`Order deleted by: ${currentUser.firstName} ${currentUser.lastName} (${currentUser.email}) for product: ${deletedOrder.product.name} - Order #${index + 1}`);
      saveData();
      updateOrdersList();
    }
  }

    // Show order detail page with track bar, estimated delivery, and discount
    function showOrderDetailPage(orderIndex) {
      currentOrderIndex = orderIndex;
      const order = orders[orderIndex];
      const productImage = order.product.images && order.product.images.length > 0 ? order.product.images[0] : 'https://via.placeholder.com/400x300?text=' + encodeURIComponent(order.product.name);
      const originalPrice = (order.product.price * 1.2).toFixed(2);
      const discount = ((originalPrice - order.product.price) / originalPrice * 100).toFixed(0);
      const deliveryTime = order.product.deliveryTime;
      const daysRange = deliveryTime.match(/\d+-\d+/)[0];
      const maxDays = parseInt(daysRange.split("-")[1]);
      const orderDate = new Date(order.date);
      const estimatedDeliveryDate = new Date(orderDate);
      estimatedDeliveryDate.setDate(orderDate.getDate() + maxDays);
      const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
      const formattedDate = estimatedDeliveryDate.toLocaleDateString('en-US', options);
      let detailContent = `
        <h3>Order #${orderIndex + 1}</h3>
        <p><strong>Date:</strong> ${order.date}</p>
        <hr>
        <h5>Product Details</h5>
        <div class="row">
          <div class="col-12 col-md-6">
            <img src="${productImage}" class="img-fluid" alt="${order.product.name}">
          </div>
          <div class="col-12 col-md-6">
            <p><strong>Name:</strong> ${order.product.name}</p>
            <p><strong>Description:</strong> ${order.product.description}</p>
            <p><strong>Selected Size:</strong> ${order.product.selectedSize}</p>
            <p><strong>Selected Color:</strong> ${order.product.selectedColor}</p>
            <p><strong>Price:</strong> <s>₹${originalPrice}</s> ₹${order.product.price.toFixed(2)} <span class="badge bg-success"><i class="bi bi-arrow-down"></i> ${discount}% off</span></p>
          </div>
        </div>
        <hr>
        <h5>Shipping Details</h5>
        <p><strong>Address:</strong> ${order.address}</p>
        <p><strong>Mobile:</strong> ${order.mobile}</p>
        <p><strong>Payment Method:</strong> ${order.payment}</p>
        <p><strong>Estimated Delivery:</strong> ${formattedDate}</p>
        <hr>
        <h5>Order Status</h5>
        <div class="track-bar ${order.received ? 'received' : (order.cancelled ? 'cancelled' : '')}">
          <div class="track-step active">
            <span>1</span>
            <small>Ordered</small>
          </div>
          <div class="track-step ${order.received ? 'active' : (order.cancelled ? 'cancelled' : '')}">
            <span>2</span>
            <small>${order.cancelled ? 'Cancelled' : 'Received'}</small>
          </div>
        </div>
      `;

      if (!order.cancelled && !order.received) {
        detailContent += `
          <button class="btn btn-success mt-3" onclick="markAsReceived(${orderIndex})">Mark as Received</button>
          <button class="btn btn-danger mt-3 ms-2" onclick="cancelOrder(); showOrderDetailPage(${orderIndex})">Cancel Order</button>
        `;
      } else if (order.received && !order.rating) {
        detailContent += `
          <h5 class="mt-3">Leave a Review</h5>
          <div class="mb-3">
            <label for="rating-${orderIndex}" class="form-label">Rating</label>
            <select id="rating-${orderIndex}" class="form-select">
              <option value="">Select Rating</option>
              <option value="1">1 Star</option>
              <option value="2">2 Stars</option>
              <option value="3">3 Stars</option>
              <option value="4">4 Stars</option>
              <option value="5">5 Stars</option>
            </select>
          </div>
          <div class="mb-3">
            <label for="review-${orderIndex}" class="form-label">Review</label>
            <textarea id="review-${orderIndex}" class="form-control" rows="3"></textarea>
          </div>
          <button class="btn btn-primary" onclick="submitReview(${orderIndex})">Submit Review</button>
        `;
      } else if (order.received && order.rating) {
        detailContent += `
          <h5 class="mt-3">Your Review</h5>
          <p><strong>Rating:</strong> ${order.rating} Stars</p>
          <p><strong>Review:</strong> ${order.review || 'No review provided.'}</p>
        `;
      }

      detailContent += `
        <div class="mt-3">
          <button class="btn btn-secondary" onclick="showSection('ordersSection')">Back to Orders</button>
          <button class="btn btn-primary ms-2" onclick="showProductDetails(${order.product.id})">View Product Details</button>
        </div>
      `;

      document.getElementById("orderDetailPage").innerHTML = detailContent;
      showSection("orderDetailSection");
    }

    // Mark order as received
    function markAsReceived(orderIndex) {
      if (confirm("Are you sure you have received this order?")) {
        orders[orderIndex].received = true;
        orders[orderIndex].receivedDate = new Date().toLocaleString();
        showNotification("Order marked as received.", "success");
        notifyOwner(`Order #${orderIndex + 1} has been marked as received by ${currentUser.firstName} ${currentUser.lastName} (${currentUser.email}).`);
        saveData();
        showOrderDetailPage(orderIndex);
      }
    }

    // Submit review and rating
    function submitReview(orderIndex) {
      const rating = document.getElementById(`rating-${orderIndex}`).value;
      const review = document.getElementById(`review-${orderIndex}`).value;
      if (!rating) {
        showNotification("Please select a rating.", "warning");
        return;
      }
      orders[orderIndex].rating = parseInt(rating);
      orders[orderIndex].review = review;
      showNotification("Thank you for your review!", "success");
      saveData();
      showOrderDetailPage(orderIndex);
    }

    // Cancel order
    function cancelOrder() {
      const order = orders[currentOrderIndex];
      if (order.cancelled) {
        showNotification("This order is already cancelled.", "warning");
        return;
      }
      const reason = prompt("Why are you cancelling the order?");
      if (reason && reason.trim() !== "") {
        orders[currentOrderIndex].cancelled = true;
        orders[currentOrderIndex].cancellationReason = reason;
        showNotification("Your order has been cancelled.", "danger");
        notifyOwner(`Order cancelled by: ${currentUser.firstName} ${currentUser.lastName} (${currentUser.email}) for product: ${order.product.name} - Order #${currentOrderIndex + 1}`);
        saveData();
        updateOrdersList();
      } else {
        showNotification("Cancellation reason is required.", "warning");
      }
    }

    // Track order 
    function trackOrder() {
      const order = orders[currentOrderIndex];
      if (order.cancelled) {
        showNotification("Tracking not available for cancelled orders.", "warning");
        return;
      }
      let progress = order.trackingStatus === "Shipped" ? 50 : order.trackingStatus === "Out for Delivery" ? 75 : order.trackingStatus === "Delivered" ? 100 : 25;
      const mapSrc = order.address ? `https://www.google.com/maps?q=${encodeURIComponent(order.address)}&output=embed` : "https://www.google.com/maps?q=New+York&output=embed";
      const trackingInfo = `
        <div class="mb-3">
          <h6>Order Progress: ${progress}%</h6>
          <div class="progress">
            <div class="progress-bar" role="progressbar" style="width: ${progress}%;" aria-valuenow="${progress}" aria-valuemin="0" aria-valuemax="100">${progress}%</div>
          </div>
        </div>
        <div class="mb-3">
          <h6>Track Your Order at Your Shipping Address</h6>
          <iframe src="${mapSrc}" width="100%" height="300" style="border:0;" allowfullscreen=""></iframe>
        </div>
      `;
      document.getElementById("trackOrderContent").innerHTML = trackingInfo;
      const trackModal = new bootstrap.Modal(document.getElementById("trackOrderModal"));
      trackModal.show();
    }
     // Show product image modal
     function showProductImageModal(imageSrc) {
      document.getElementById("modalProductImage").src = imageSrc;
      const productImageModal = new bootstrap.Modal(document.getElementById("productImageModal"));
      productImageModal.show();
    }

    // Zoom image functions
    let currentZoom = 1;
    function zoomImage(factor) {
      const img = document.getElementById("modalProductImage");
      currentZoom *= factor;
      if (currentZoom < 0.5) currentZoom = 0.5;
      if (currentZoom > 3) currentZoom = 3;
      img.style.transform = `scale(${currentZoom})`;
    }

    function resetZoom() {
      currentZoom = 1;
      document.getElementById("modalProductImage").style.transform = 'scale(1)';
    }

    document.getElementById("productImageModal").addEventListener('hidden.bs.modal', function () {
      resetZoom();
    });
     // Update menu account details
     function updateMenuAccountDetails() {
        const container = document.getElementById("menuAccountDetails");
        if (currentUser) {
          container.innerHTML = `<i class="bi bi-person-circle me-2"></i><h4 class="d-inline">${currentUser.firstName} ${currentUser.lastName}</h4><br><small>${currentUser.email}</small>`;
          if (currentUser.email === "tedpole.in@gmail.com") {
            document.getElementById("sellerDashboardMenuItem").style.display = "block";
            document.getElementById("ownerDashboardMenuItem").style.display = "block";
          }
        } else {
          container.innerHTML = `<h4>Welcome Guest</h4>`;
          document.getElementById("sellerDashboardMenuItem").style.display = "none";
          document.getElementById("ownerDashboardMenuItem").style.display = "none";
        }
      }
  
      // Logout
      function logout() {
        if (currentUser) {
          currentUser.isLoggedIn = false;
          currentUser.lastActivity = new Date().toISOString();
        }
        currentUser = null;
        showNotification("You have been logged out.", "info");
        saveData();
        updateHeaderProfile();
        updateMenuAccountDetails();
        showSection("homeSection");
      }
  
      // Header button actions
      document.getElementById("accountButton").addEventListener("click", () => currentUser ? showSection("accountSection") : showSection("loginSection"));
      document.getElementById("notificationButton").addEventListener("click", () => showSection("notificationsSection"));
  
      // Search functionality
      document.getElementById("searchSectionButton").addEventListener("click", () => {
        const query = document.getElementById("searchSectionInput").value.toLowerCase();
        const filteredProducts = query.trim() === "" ? products : products.filter(p => p.name.toLowerCase().includes(query) || p.description.toLowerCase().includes(query));
        generateProducts("searchResultsContainer", filteredProducts);
      });
  
      // Login form submission
      document.getElementById("loginForm")?.addEventListener("submit", function(e) {
        e.preventDefault();
        const email = document.getElementById("loginEmail").value;
        const password = document.getElementById("loginPassword").value;
        const user = users.find(u => u.email === email && u.password === password);
        if (user) {
          currentUser = user;
          currentUser.isLoggedIn = true;
          currentUser.lastActivity = new Date().toISOString();
          showNotification("Login successful!", "success");
          notifyOwner(`User logged in: ${currentUser.firstName} ${currentUser.lastName} (${currentUser.email})`);
          saveData();
          updateHeaderProfile();
          updateMenuAccountDetails();
          showSection("homeSection");
        } else {
          showNotification("Invalid email or password. Please sign up if you don't have an account.", "warning");
        }
      });
  
      // Sign up form submission
      document.getElementById("signupForm")?.addEventListener("submit", function(e) {
        e.preventDefault();
        const firstName = document.getElementById("firstName").value;
        const lastName = document.getElementById("lastName").value;
        const mobile = document.getElementById("mobileNumberSignUp").value;
        const email = document.getElementById("signupEmail").value;
        const password = document.getElementById("signupPassword").value;
        const confirmPassword = document.getElementById("confirmPassword").value;
        if (password !== confirmPassword) {
          showNotification("Passwords do not match!", "warning");
          return;
        }
        if (users.some(u => u.email === email)) {
          showNotification("User with this email already exists. Please log in.", "warning");
          return;
        }
        currentUser = { firstName, lastName, email, mobile, password, isLoggedIn: true, lastActivity: new Date().toISOString(), location: locations[Math.floor(Math.random() * locations.length)] };
        users.push(currentUser);
        showNotification("Sign Up successful!", "success");
        notifyOwner(`New user signed up: ${currentUser.firstName} ${currentUser.lastName} (${currentUser.email})`);
        saveData();
        updateHeaderProfile();
        updateMenuAccountDetails();
        showSection("homeSection");
      });
  
      // Contact form submission
      document.getElementById("contactForm")?.addEventListener("submit", function(e) {
        e.preventDefault();
        showNotification("Message was sent", "success");
        this.reset();
      });
  
      // Apply filters for Shop section
      function applyFilters() {
        const size = document.getElementById("filterSize").value;
        const color = document.getElementById("filterColor").value;
        const price = document.getElementById("filterPrice").value;
        activeFilters = {};
        if (size) activeFilters.size = size;
        if (color) activeFilters.color = color;
        if (price) activeFilters.price = price;
        let filteredProducts = [...products];
        if (activeFilters.size) {
          filteredProducts = filteredProducts.filter(p => p.size.split(",").map(s => s.trim().toLowerCase()).includes(activeFilters.size.toLowerCase()));
        }
        if (activeFilters.color) {
          filteredProducts = filteredProducts.filter(p => p.color.split(",").map(c => c.trim().toLowerCase()).includes(activeFilters.color.toLowerCase()));
        }
        if (activeFilters.price) {
          const [min, max] = activeFilters.price.split("-").map(Number);
          filteredProducts = filteredProducts.filter(p => p.price >= min && p.price <= max);
        }
        generateProducts("shopProductContainer", filteredProducts);
        displayActiveFilters();
      }
  
      // Display active filters for Shop section
      function displayActiveFilters() {
        const activeFilterDisplay = document.getElementById("activeFilterDisplay");
        let html = "";
        if (Object.keys(activeFilters).length > 0) {
          html += '<div class="filter-tags">';
          if (activeFilters.size) html += `<span class="badge bg-primary me-2" style="cursor: pointer;" onclick="removeFilter('size')">Size: ${activeFilters.size} <i class="bi bi-x"></i></span>`;
          if (activeFilters.color) html += `<span class="badge bg-primary me-2" style="cursor: pointer;" onclick="removeFilter('color')">Color: ${activeFilters.color} <i class="bi bi-x"></i></span>`;
          if (activeFilters.price) html += `<span class="badge bg-primary me-2" style="cursor: pointer;" onclick="removeFilter('price')">Price: ${activeFilters.price} <i class="bi bi-x"></i></span>`;
          html += '</div>';
        }
        activeFilterDisplay.innerHTML = html;
      }
  
      // Remove filter for Shop section
      function removeFilter(filterType) {
        if (filterType === 'size') document.getElementById('filterSize').value = '';
        else if (filterType === 'color') document.getElementById('filterColor').value = '';
        else if (filterType === 'price') document.getElementById('filterPrice').value = '';
        applyFilters();
      }
  
      // Clear all filters for Shop section
      function clearAllFilters() {
        document.getElementById('filterSize').value = '';
        document.getElementById('filterColor').value = '';
        document.getElementById('filterPrice').value = '';
        activeFilters = {};
        generateProducts("shopProductContainer", products);
        displayActiveFilters();
      }
  
      // Apply filters for Men's Wear section
      function applyMenswearFilters() {
        const size = document.getElementById("menswearFilterSize").value;
        const color = document.getElementById("menswearFilterColor").value;
        const price = document.getElementById("menswearFilterPrice").value;
        menswearActiveFilters = {};
        if (size) menswearActiveFilters.size = size;
        if (color) menswearActiveFilters.color = color;
        if (price) menswearActiveFilters.price = price;
        let filteredProducts = products.filter(p => p.category === "Men's Wear");
        if (menswearActiveFilters.size) {
          filteredProducts = filteredProducts.filter(p => p.size.split(",").map(s => s.trim().toLowerCase()).includes(menswearActiveFilters.size.toLowerCase()));
        }
        if (menswearActiveFilters.color) {
          filteredProducts = filteredProducts.filter(p => p.color.split(",").map(c => c.trim().toLowerCase()).includes(menswearActiveFilters.color.toLowerCase()));
        }
        if (menswearActiveFilters.price) {
          const [min, max] = menswearActiveFilters.price.split("-").map(Number);
          filteredProducts = filteredProducts.filter(p => p.price >= min && p.price <= max);
        }
        generateProducts("menswearContainer", filteredProducts);
        displayMenswearActiveFilters();
      }
  
      // Display active filters for Men's Wear section
      function displayMenswearActiveFilters() {
        const activeFilterDisplay = document.getElementById("menswearActiveFilterDisplay");
        let html = "";
        if (Object.keys(menswearActiveFilters).length > 0) {
          html += '<div class="filter-tags">';
          if (menswearActiveFilters.size) html += `<span class="badge bg-primary me-2" style="cursor: pointer;" onclick="removeMenswearFilter('size')">Size: ${menswearActiveFilters.size} <i class="bi bi-x"></i></span>`;
          if (menswearActiveFilters.color) html += `<span class="badge bg-primary me-2" style="cursor: pointer;" onclick="removeMenswearFilter('color')">Color: ${menswearActiveFilters.color} <i class="bi bi-x"></i></span>`;
          if (menswearActiveFilters.price) html += `<span class="badge bg-primary me-2" style="cursor: pointer;" onclick="removeMenswearFilter('price')">Price: ${menswearActiveFilters.price} <i class="bi bi-x"></i></span>`;
          html += '</div>';
        }
        activeFilterDisplay.innerHTML = html;
      }
  
      // Remove filter for Men's Wear section
      function removeMenswearFilter(filterType) {
        if (filterType === 'size') document.getElementById('menswearFilterSize').value = '';
        else if (filterType === 'color') document.getElementById('menswearFilterColor').value = '';
        else if (filterType === 'price') document.getElementById('menswearFilterPrice').value = '';
        applyMenswearFilters();
      }
  
      // Clear filters for Men's Wear section
      function clearMenswearFilters() {
        document.getElementById("menswearFilterSize").value = "";
        document.getElementById("menswearFilterColor").value = "";
        document.getElementById("menswearFilterPrice").value = "";
        menswearActiveFilters = {};
        const menswearProducts = products.filter(p => p.category === "Men's Wear");
        generateProducts("menswearContainer", menswearProducts);
        displayMenswearActiveFilters();
      }
  
      // Apply filters for Accessories section
      function applyAccessoriesFilters() {
        const size = document.getElementById("accessoriesFilterSize").value;
        const color = document.getElementById("accessoriesFilterColor").value;
        const price = document.getElementById("accessoriesFilterPrice").value;
        accessoriesActiveFilters = {};
        if (size) accessoriesActiveFilters.size = size;
        if (color) accessoriesActiveFilters.color = color;
        if (price) accessoriesActiveFilters.price = price;
        let filteredProducts = products.filter(p => p.category === "Accessories");
        if (accessoriesActiveFilters.size) {
          filteredProducts = filteredProducts.filter(p => p.size.split(",").map(s => s.trim().toLowerCase()).includes(accessoriesActiveFilters.size.toLowerCase()));
        }
        if (accessoriesActiveFilters.color) {
          filteredProducts = filteredProducts.filter(p => p.color.split(",").map(c => c.trim().toLowerCase()).includes(accessoriesActiveFilters.color.toLowerCase()));
        }
        if (accessoriesActiveFilters.price) {
          const [min, max] = accessoriesActiveFilters.price.split("-").map(Number);
          filteredProducts = filteredProducts.filter(p => p.price >= min && p.price <= max);
        }
        generateProducts("accessoriesContainer", filteredProducts);
        displayAccessoriesActiveFilters();
      }
  
      // Display active filters for Accessories section
      function displayAccessoriesActiveFilters() {
        const activeFilterDisplay = document.getElementById("accessoriesActiveFilterDisplay");
        let html = "";
        if (Object.keys(accessoriesActiveFilters).length > 0) {
          html += '<div class="filter-tags">';
          if (accessoriesActiveFilters.size) html += `<span class="badge bg-primary me-2" style="cursor: pointer;" onclick="removeAccessoriesFilter('size')">Size: ${accessoriesActiveFilters.size} <i class="bi bi-x"></i></span>`;
          if (accessoriesActiveFilters.color) html += `<span class="badge bg-primary me-2" style="cursor: pointer;" onclick="removeAccessoriesFilter('color')">Color: ${accessoriesActiveFilters.color} <i class="bi bi-x"></i></span>`;
          if (accessoriesActiveFilters.price) html += `<span class="badge bg-primary me-2" style="cursor: pointer;" onclick="removeAccessoriesFilter('price')">Price: ${accessoriesActiveFilters.price} <i class="bi bi-x"></i></span>`;
          html += '</div>';
        }
        activeFilterDisplay.innerHTML = html;
      }
  
      // Remove filter for Accessories section
      function removeAccessoriesFilter(filterType) {
        if (filterType === 'size') document.getElementById('accessoriesFilterSize').value = '';
        else if (filterType === 'color') document.getElementById('accessoriesFilterColor').value = '';
        else if (filterType === 'price') document.getElementById('accessoriesFilterPrice').value = '';
        applyAccessoriesFilters();
      }
  
      // Clear filters for Accessories section
      function clearAccessoriesFilters() {
        document.getElementById("accessoriesFilterSize").value = "";
        document.getElementById("accessoriesFilterColor").value = "";
        document.getElementById("accessoriesFilterPrice").value = "";
        accessoriesActiveFilters = {};
        const accessoriesProducts = products.filter(p => p.category === "Accessories");
        generateProducts("accessoriesContainer", accessoriesProducts);
        displayAccessoriesActiveFilters();
      }
  
      // Notify owner
      function notifyOwner(message) {
        ownerNotifications.push({ message, date: new Date().toLocaleString() });
        saveData();
      }
  
      // Update notifications
      function updateNotifications() {
        const notificationsContent = document.getElementById("notificationsContent");
        if (notifications.length === 0) {
          notificationsContent.innerHTML = "<p>No notifications yet.</p>";
        } else {
          let html = '<div class="list-group">';
          notifications.slice().reverse().forEach(notif => {
            html += `
              <div class="list-group-item">
                <i class="bi bi-bell-fill me-2"></i>
                <strong>${notif.date}</strong>: ${notif.message}
              </div>
            `;
          });
          html += '</div>';
          notificationsContent.innerHTML = html;
        }
      }
  
     // Update Seller Dashboard
     function updateSellerDashboard() {
      const sellerDashboardContent = document.getElementById("sellerDashboardContent");
      let html = "<h2>Users</h2>";
      if (users.length === 0) {
        html += "<p>No users yet.</p>";
      } else {
        html += '<div class="list-group">';
        users.forEach(user => {
          html += `
            <div class="list-group-item">
              <strong>${user.firstName} ${user.lastName}</strong><br>
              <small>${user.email}</small><br>
              <small>Mobile: ${user.mobile || "Not provided"}</small>
            </div>
          `;
        });
        html += '</div>';
      }
      html += "<h2 class='mt-4'>Orders</h2>";
      if (orders.length === 0) {
        html += "<p>No orders yet.</p>";
      } else {
        orders.forEach((order, index) => {
          const productImage = order.product.images && order.product.images.length > 0 ? order.product.images[0] : 'https://via.placeholder.com/100x100?text=No+Image';
          html += `
            <div class="card mb-3 shadow-sm order-card">
              <div class="card-header">
                Order #${index + 1} - ${order.date}
              </div>
              <div class="card-body">
                <div class="row">
                  <div class="col-12 col-md-4 mb-3 mb-md-0">
                    <h6>Buyer Information</h6>
                    <p><strong>Name:</strong> ${order.buyer.firstName} ${order.buyer.lastName}</p>
                    <p><strong>Email:</strong> ${order.buyer.email}</p>
                    <p><strong>Mobile:</strong> ${order.mobile}</p>
                  </div>
                  <div class="col-12 col-md-4 mb-3 mb-md-0">
                    <h6>Product Information</h6>
                    <img src="${productImage}" alt="${order.product.name}" class="img-fluid mb-2" style="max-width:100px; max-height:100px;" >
                    <p><strong>Name:</strong> ${order.product.name}</p>
                    <p><strong>Description:</strong> ${order.product.description}</p>
                    <p><strong>Selected Size:</strong> ${order.product.selectedSize}</p>
                    <p><strong>Selected Color:</strong> ${order.product.selectedColor}</p>
                    <p><strong>Price:</strong> 
                      ${order.product.originalPrice && order.product.originalPrice > order.product.price ? 
                        `<s>₹${order.product.originalPrice.toFixed(2)}</s> ` : 
                        ''}
                      ₹${order.product.price.toFixed(2)}
                    </p>
                    <p><strong>Category:</strong> ${order.product.category}</p>
                  </div>
                  <div class="col-12 col-md-4">
                    <h6>Shipping Information</h6>
                    <p><strong>Address:</strong> ${order.address}</p>
                    <p><strong>Payment Method:</strong> ${order.payment}</p>
                    <p><strong>Status:</strong> ${order.cancelled ? 'Cancelled' : 'Active'}</p>
                    ${order.cancelled ? `<p><strong>Cancellation Reason:</strong> ${order.cancellationReason}</p>` : ''}
                  </div>
                </div>
                <div class="qr-code-container mt-3">
                  <h6>Order QR Code</h6>
                  <div id="qrcode-${index}"></div>
                </div>
              </div>
              <div class="card-footer text-end">
                <button class="btn btn-primary me-2" onclick="printOrder(${index})">Print</button>
                <button class="btn btn-secondary" onclick="downloadOrder(${index})">Download</button>
              </div>
            </div>
          `;
        });
      }
      html += "<h2 class='mt-4'>Notifications</h2>";
      if (ownerNotifications.length === 0) {
        html += "<p>No notifications yet.</p>";
      } else {
        html += `<div class="d-flex justify-content-end mb-3">
                   <button class="btn btn-danger btn-sm" onclick="clearOwnerNotifications()">Clear Notifications</button>
                 </div>`;
        html += '<div class="list-group">';
        ownerNotifications.slice().reverse().forEach(notif => {
          html += `
            <div class="list-group-item">
              <i class="bi bi-bell-fill me-2"></i>
              <strong>${notif.date}</strong>: ${notif.message}
            </div>
          `;
        });
        html += '</div>';
      }
      sellerDashboardContent.innerHTML = html;
  
      // Generate QR codes for each order
      orders.forEach((order, index) => {
        const qrDiv = document.getElementById(`qrcode-${index}`);
        if (qrDiv) {
          new QRCode(qrDiv, {
            text: order.qrData,
            width: 128,
            height: 128
          });
        }
      });
    }
  
    // Clear owner notifications
    function clearOwnerNotifications() {
      if (confirm("Are you sure you want to clear all notifications?")) {
        ownerNotifications = [];
        saveData();
        updateSellerDashboard();
        showNotification("All notifications cleared.", "info");
      }
    }
  
    // Function to print order card with QR code
    function printOrder(index) {
      const orderCards = document.querySelectorAll('.order-card');
      if (index < 0 || index >= orderCards.length) return;
      const orderCard = orderCards[index];
      
      document.body.classList.add('print-mode');
      orderCard.classList.add('print-selected');
      
      window.print();
      
      window.addEventListener('afterprint', function() {
        document.body.classList.remove('print-mode');
        orderCard.classList.remove('print-selected');
      }, { once: true });
    }
  
    // Function to download order card as PNG with QR code
    function downloadOrder(index) {
      const orderCards = document.querySelectorAll('.order-card');
      if (index < 0 || index >= orderCards.length) return;
      const orderCard = orderCards[index];
      
      html2canvas(orderCard).then(canvas => {
        const link = document.createElement('a');
        link.href = canvas.toDataURL('image/png');
        link.download = `order_${index + 1}.png`;
        link.click();
      }).catch(error => {
        console.error('Error generating image:', error);
        showNotification('Failed to generate image for download.', 'danger');
      });
    }
    // Initialize
    loadData();
  </script>
  <!-- Bootstrap JS Bundle -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
  </html>
